# Feature Specification: 歌詞搜尋網站

**Feature Branch**: `002-lyrics-search`  
**Created**: 2025-12-04  
**Status**: Draft  
**Input**: User description: "我要一個找歌詞的網站，可以透過搜索歌名、歌手或是一段歌詞來找到對應結果，點及搜尋結果後會導頁到詳細頁，而詳細頁本身裡面會有完整歌詞、歌曲名稱跟歌手本人的名稱"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 搜尋歌曲 (Priority: P1)

使用者進入網站首頁後，可以在搜尋欄位輸入歌名、歌手名稱或一段歌詞文字，系統會即時顯示符合條件的搜尋結果列表。每個搜尋結果會顯示歌曲名稱和歌手名稱，讓使用者能夠快速識別目標歌曲。

**Why this priority**: 搜尋功能是整個網站的核心價值，沒有搜尋功能，使用者無法找到任何歌詞，因此必須優先實作。

**Independent Test**: 可透過輸入關鍵字並驗證搜尋結果是否正確顯示來獨立測試，此功能本身即可提供「找到歌曲」的核心價值。

**Acceptance Scenarios**:

1. **Given** 使用者在首頁, **When** 輸入歌曲名稱並送出搜尋, **Then** 顯示包含該歌名的歌曲列表
2. **Given** 使用者在首頁, **When** 輸入歌手名稱並送出搜尋, **Then** 顯示該歌手的所有歌曲列表
3. **Given** 使用者在首頁, **When** 輸入一段歌詞片段並送出搜尋, **Then** 顯示包含該歌詞的歌曲列表
4. **Given** 使用者輸入關鍵字, **When** 搜尋過程中, **Then** 顯示載入指示器
5. **Given** 搜尋完成, **When** 有符合結果, **Then** 每個結果顯示歌曲名稱與歌手名稱

---

### User Story 2 - 檢視歌詞詳情 (Priority: P2)

使用者從搜尋結果列表中點擊某一首歌曲後，系統會導向歌詞詳情頁面。詳情頁面會完整呈現該首歌曲的歌詞內容、歌曲名稱以及歌手名稱。

**Why this priority**: 檢視完整歌詞是使用者的最終目的，但必須先有搜尋功能才能導向此頁面，因此為第二優先。

**Independent Test**: 可透過直接存取歌詞詳情頁面 URL 來測試，驗證頁面是否正確顯示歌詞、歌名和歌手資訊。

**Acceptance Scenarios**:

1. **Given** 使用者在搜尋結果頁, **When** 點擊某首歌曲, **Then** 導向該歌曲的詳情頁面
2. **Given** 使用者在詳情頁面, **When** 頁面載入完成, **Then** 顯示完整歌詞內容
3. **Given** 使用者在詳情頁面, **When** 頁面載入完成, **Then** 顯示歌曲名稱
4. **Given** 使用者在詳情頁面, **When** 頁面載入完成, **Then** 顯示歌手名稱
5. **Given** 使用者在詳情頁面, **When** 頁面正在載入, **Then** 顯示載入指示器

---

### User Story 3 - 從詳情頁返回搜尋 (Priority: P3)

使用者在歌詞詳情頁面時，可以透過返回按鈕或導航列回到搜尋結果頁面，繼續瀏覽其他搜尋結果。

**Why this priority**: 此為輔助性導航功能，提升使用體驗但非核心功能，因此優先級較低。

**Independent Test**: 可從詳情頁面點擊返回，驗證是否正確回到搜尋結果頁面並保留先前的搜尋狀態。

**Acceptance Scenarios**:

1. **Given** 使用者在詳情頁面, **When** 點擊返回按鈕, **Then** 返回搜尋結果頁面
2. **Given** 使用者返回搜尋結果頁, **When** 頁面顯示, **Then** 保留先前的搜尋結果

---

### Edge Cases

- 搜尋關鍵字為空白時，顯示提示訊息要求輸入內容
- 搜尋無結果時，顯示「找不到符合的歌曲」提示訊息
- 網路請求失敗時，顯示錯誤訊息並提供重試選項
- 歌詞詳情頁面 ID 不存在時，顯示「找不到此歌曲」錯誤頁面
- 搜尋關鍵字過長時（超過 200 字元），截斷並提示使用者
- 特殊字元搜尋時，正確處理並回傳結果

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系統 MUST 提供搜尋欄位，接受使用者輸入歌名、歌手或歌詞片段
- **FR-002**: 系統 MUST 根據搜尋關鍵字查詢並回傳符合條件的歌曲列表
- **FR-003**: 搜尋結果列表 MUST 顯示每首歌曲的歌名和歌手名稱
- **FR-004**: 使用者 MUST 能夠點擊搜尋結果導向歌詞詳情頁面
- **FR-005**: 歌詞詳情頁面 MUST 顯示完整歌詞、歌曲名稱和歌手名稱
- **FR-006**: 系統 MUST 在資料載入時顯示載入指示器
- **FR-007**: 系統 MUST 在搜尋無結果時顯示適當的提示訊息
- **FR-008**: 系統 MUST 在發生錯誤時顯示正體中文錯誤訊息
- **FR-009**: 使用者 MUST 能夠從詳情頁面返回搜尋結果頁面
- **FR-010**: 系統 MUST 支援響應式設計，適配桌面和行動裝置

### Key Entities

- **Song（歌曲）**: 代表一首歌曲，包含唯一識別碼（id）、歌手名稱（artist）、歌曲名稱（title）、完整歌詞內容（lyrics）
- **SearchResult（搜尋結果）**: 代表搜尋回傳的結果項目，包含歌曲識別碼、歌曲名稱、歌手名稱（用於列表顯示）
- **SearchQuery（搜尋查詢）**: 代表使用者的搜尋請求，包含搜尋關鍵字

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 使用者可在 3 秒內完成一次搜尋並看到結果
- **SC-002**: 搜尋結果頁面載入時間不超過 2 秒
- **SC-003**: 歌詞詳情頁面載入時間不超過 2 秒
- **SC-004**: 90% 的使用者能在首次使用時成功找到目標歌曲
- **SC-005**: 網站在桌面和行動裝置上皆能正常使用
- **SC-006**: 使用者從搜尋到檢視完整歌詞的完整流程可在 10 秒內完成

## Assumptions

- 歌詞資料來源為 Google Sheet 搭配 Apps Script 作為後端 API
- 搜尋功能採用關鍵字比對方式，不涉及進階搜尋語法
- 網站不需使用者登入即可使用所有功能
- 搜尋結果預設每頁顯示 20 筆，採用分頁或無限捲動方式載入更多
- 歌詞內容以純文字形式呈現，不包含時間軸同步功能

## Clarifications

### Session 2025-12-05

- Q: 外部 API 資料來源為何？ → A: Google Sheet 搭配 Apps Script
- Q: Google Sheet 資料結構欄位為何？ → A: id、artist、title、lyrics（4 欄）
